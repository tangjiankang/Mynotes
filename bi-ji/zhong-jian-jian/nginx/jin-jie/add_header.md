# add\_header

由于浏览器的安全限制，前端js代码无法直接访问不同域下的资源。只要**协议、域名、端口**有任何一个不同，都被当作是不同的域。

跨域的解决方案有很多，目前常用的方案是通过nginx代理服务器给返回的响应头添加cors跨域配置项来解决。

在不添加always的情况下，add\_header只对响应码为200, 201 \(1.3.10\), 204, 206, 301, 302, 303, 304, 307 \(1.1.16, 1.0.13\), 308 \(1.13.0\)这些生效（括号内是nginx版本）。也就是说当服务端返回响应异常，响应码不是上述之一的话，即使nginx有配跨域头信息，浏览器仍然会显示跨域错误。原因就是因为nginx对异常响应码添加add\_header无效。

实际工作中往往前端需要捕获服务端异常响应，这时在nginx跨域add\_header上加上always，使nginx对任何响应码生效。

